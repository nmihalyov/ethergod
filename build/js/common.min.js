"use strict";window.onload=function(){$(document).on("click",(function(e){$(e.target).closest(".js-tabs-dropdown").length||$(".js-tabs-dropdown").removeClass("js-tabs-dropdown--active").find(".js-tabs-dropdown-inner").slideUp(300)})),$(".js-tab").on("click",(function(e){var t=$(e.currentTarget),r=t.attr("data-content"),n=t.closest(".js-tabs");n.find(".tabs__item--active").removeClass("tabs__item--active"),t.addClass("tabs__item--active"),n.find(".js-tabs-content").hide(0),n.find('.js-tabs-content[data-content="'.concat(r,'"]')).fadeIn(500)})),$("body").on("click",".js-tabs-dropdown-item",(function(e){var t=$(e.currentTarget);if(!t.siblings(".js-tabs-dropdown-inner").length){var r=t.parent();t.parent().siblings(".js-tabs-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-tabs-dropdown"));var n=Array.from(t.next().children()).sort((function(e,t){if(e.innerText<t.innerText)return-1}));t.next().children().remove(),r.append(n)}t.closest(".js-tabs-dropdown").toggleClass("js-tabs-dropdown--active").find(".js-tabs-dropdown-inner").slideToggle(300)})),$(document).on("click",(function(e){$(e.target).closest(".js-popup-dropdown").length||$(".js-popup-dropdown").removeClass("js-popup-dropdown--active").find(".js-popup-dropdown-inner").slideUp(300)}));var e=0,t=function(t,r){$(t.target).closest(".popup__window").length&&r.hasClass("js-popup")||($("body").css({position:"static",marginTop:"0"}),window.scrollTo(0,e),r.closest(".js-popup").hide(0))},r=function(t){e=window.scrollY,$("body").css({position:"fixed",marginTop:"".concat(-e,"px")}),t.fadeIn(300)};if($(".js-open-popup").on("click",(function(e){var t=$(e.currentTarget).attr("data-popup"),n=$('.js-popup[data-popup="'.concat(t,'"]'));r(n)})),$(".js-close-popup").on("click",(function(e){t(e,$(e.currentTarget))})),$(".js-popup-dropdown-item").on("click",(function(e){var t=$(e.currentTarget);t.siblings(".js-popup-dropdown-inner").length||(t.parent().siblings(".js-popup-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-popup-dropdown"))),t.closest(".js-popup-dropdown").toggleClass("js-popup-dropdown--active").find(".js-popup-dropdown-inner").slideToggle(300)})),$(".js-form-withdraw").on("submit",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.find('input[name="ethWithdrawalWalletAddress"]'),n=t.find('input[name="ethSumToWithdraw"]');34!==r.val().length&&(!1,r.closest(".input").addClass("input--error")),n.val()<n.attr("data-min")?(!1,n.closest(".input").addClass("input--error").find(".input__error").text("Минимум ".concat(n.attr("data-min")))):n.val()>n.attr("data-max")&&(!1,n.closest(".input").addClass("input--error").find(".input__error").text("Недостаточно средств"))})),$(".js-form-transfer").on("submit",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.find('input[name="recipientName"]'),n=t.find('input[name="transferAmount"]');34!==r.val().length&&(!1,r.closest(".input").addClass("input--error")),n.val()>n.attr("data-max")&&(!1,n.closest(".input").addClass("input--error").find(".input__error").text("Недостаточно средств"))})),$(document).on("click",(function(e){var t=$(e.target);t.hasClass("js-tel-dropdown")||t.hasClass("input__field")||$(".js-tel-dropdown").removeClass("js-tel-dropdown--active").find(".js-tel-dropdown-inner").slideUp(300)})),$(".js-input-copy").on("click",(function(e){e.preventDefault();var t=e.currentTarget.parentNode.querySelector("input"),r=t.getAttribute("type");t.setAttribute("type","text"),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),t.setAttribute("type",r)})),$(".input").on("input",(function(e){$(e.currentTarget).closest(".input").removeClass("input--error")})),$(".js-input-max").on("click",(function(e){var t=$(e.currentTarget);t.siblings(".input__field").val(t.siblings(".input__field").attr("data-max")),t.closest(".input").removeClass("input--error")})),$(".js-tel-dropdown").on("click",(function(e){$(e.currentTarget).toggleClass("js-tel-dropdown--active").find(".js-tel-dropdown-inner").slideToggle(300)})),$(".js-tel-dropdown-item").on("click",(function(e){var t=$(e.currentTarget),r=t.attr("data-icon");t.closest(".js-tel-dropdown").attr("data-icon",r),t.closest(".input").find("input").attr("placeholder",t.attr("data-mask").replaceAll("9","_")).inputmask(t.attr("data-mask"))})),$('input[type="tel"]').each((function(e,t){$(t).inputmask($(t).attr("data-mask"))})),$(".js-input-toggle").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget).siblings("input");t.attr("type","password"===t.attr("type")?"text":"password")})),$(".code__input").on("keyup",(function(e){var t=$(e.currentTarget),r=t.val(),n=e.keyCode||e.charCode,o=!1;t.val(r.replace(/[^0-9]/g,"")),/[^0-9]/g.test(r)||8==n||46==n?8!=n&&46!=n||""!==r||t.prev().focus():t.next().focus(),t.parent().find("input").each((function(e,t){""===t.value&&(o=!0)})),o||(t.parent().addClass("code--entered"),t.parent().parent().find(".js-code-title").hide(),t.parent().parent().find(".js-code-result").show())})),$(document).on("click",(function(e){var t=$(e.target);t.closest(".js-menu").length||t.hasClass("js-burger")||$(".js-menu").removeClass("header__menu--active"),t.closest(".js-header-dropdown").length||$(".js-header-dropdown").removeClass("js-header-dropdown--active").find(".js-header-dropdown-inner").slideUp(300),t.closest(".header__context").length&&!t.hasClass("js-open-popup")||$(".js-header-context-menu").fadeOut(300)})),$(".js-burger").on("click",(function(){$(".js-menu").addClass("header__menu--active")})),$(".js-menu-close").on("click",(function(){$(".js-menu").removeClass("header__menu--active")})),localStorage.getItem("currencyShow")){var n=$('.js-header-dropdown-item[data-currency="'.concat(localStorage.getItem("currencyShow"),'"]'));n.parent().siblings(".js-header-dropdown-item").prependTo(n.parent()),n.prependTo(n.closest(".js-header-dropdown"))}$(".js-header-dropdown-item").on("click",(function(e){var t=$(e.currentTarget);t.siblings(".js-header-dropdown-inner").length||(t.parent().siblings(".js-header-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-header-dropdown"))),t.attr("data-currency")&&localStorage.setItem("currencyShow",t.attr("data-currency")),t.closest(".js-header-dropdown").toggleClass("js-header-dropdown--active").find(".js-header-dropdown-inner").slideToggle(300)})),$(".js-header-context").on("click",(function(e){var t=$(e.currentTarget);$(".js-header-context-menu").not(t.siblings()).fadeOut(300),t.siblings(".js-header-context-menu").fadeToggle(300)}));var o=function(e){"cash"===e?($(".header__crypto .js-header-dropdown-item").each((function(e,t){$(t).html("<span>$</span>".concat($(t).attr("data-cash")))})),$(".js-header-switch").attr("data-type","cash")):"crypto"===e&&($(".header__crypto .js-header-dropdown-item").each((function(e,t){$(t).html($(t).attr("data-crypto"))})),$(".js-header-switch").attr("data-type","crypto"))};"cash"===localStorage.getItem("cryptoCashView")?o("cash"):o("crypto"),$(".js-header-switch").on("click",(function(e){"crypto"===$(e.currentTarget).attr("data-type")?(localStorage.setItem("cryptoCashView","cash"),o("cash")):(localStorage.setItem("cryptoCashView","crypto"),o("crypto"))})),$(".js-slider").slick({variableWidth:!0,centerMode:!0,swipe:!1,prevArrow:'<div class="slider__carousel-arrow slider__carousel-arrow--prev"></div>',nextArrow:'<div class="slider__carousel-arrow slider__carousel-arrow--next"></div>'}),$(".js-games-slider").slick({infinite:!0,swipe:!1,slidesToShow:6,variableWidth:!0,prevArrow:'<div class="games__slider-arrow games__slider-arrow--prev"></div>',nextArrow:'<div class="games__slider-arrow games__slider-arrow--next"></div>'}),$(document).on("click",(function(e){$(e.target).closest(".js-group-dropdown").length||$(".js-group-dropdown").removeClass("js-group-dropdown--active").find(".js-group-dropdown-inner").slideUp(300)})),$("body").on("click",".js-group-dropdown-item",(function(e){var t=$(e.currentTarget);if(!t.siblings(".js-group-dropdown-inner").length){var r=t.parent();t.parent().siblings(".js-group-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-group-dropdown"));var n=Array.from(t.next().children()).sort((function(e,t){if(e.innerText<t.innerText)return-1}));t.next().children().remove(),r.append(n)}t.closest(".js-group-dropdown").toggleClass("js-group-dropdown--active").find(".js-group-dropdown-inner").slideToggle(300)})),$(".levels__item-head").on("click",(function(e){var t=$(e.currentTarget);$(".levels__item-desc").slideUp(300),t.hasClass("levels__item-head--active")?t.removeClass("levels__item-head--active"):($(".levels__item-head--active").removeClass("levels__item-head--active"),t.addClass("levels__item-head--active"),t.parent().find(".levels__item-desc").slideDown(300))})),$(".js-vip-slider").slick({variableWidth:!0,variableHeight:!0,centerMode:!0,swipe:!1,prevArrow:'<div class="vip__feedback-arrow vip__feedback-arrow--prev"></div>',nextArrow:'<div class="vip__feedback-arrow vip__feedback-arrow--next"></div>'})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCJvbiIsImUiLCIkIiwidGFyZ2V0IiwiY2xvc2VzdCIsImxlbmd0aCIsImZpbmQiLCJzbGlkZVVwIiwiJHRoaXMiLCJjdXJyZW50VGFyZ2V0IiwiYXR0ciIsIiR0YWJzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJjb25jYXQiLCJmYWRlSW4iLCJzaWJsaW5ncyIsIiR0YWJzRHJvcGRvd25Jbm5lciIsInByZXBlbmRUbyIsInBhcmVudCIsIiRzb3J0ZWRJdGVtcyIsIkFycmF5IiwiY2hpbGRyZW4iLCJzb3J0IiwiYSIsImlubmVyVGV4dCIsImZyb20iLCJuZXh0IiwiYiIsInJlbW92ZSIsImRvY3VtZW50IiwiYXBwZW5kIiwidG9wT2Zmc2V0IiwibWFyZ2luVG9wIiwiaGlkZU92ZXJmbG93IiwiJHBvcHVwIiwiaGFzQ2xhc3MiLCJjbG9zZVBvcHVwIiwicG9zaXRpb24iLCJzaG93T3ZlcmZsb3ciLCJzY3JvbGxUbyIsIm9wZW5Qb3B1cCIsInNjcm9sbFkiLCJjc3MiLCIkYW1vdW50IiwiaXNWYWxpZCIsIiRhZGRyZXNzIiwic2xpZGVUb2dnbGUiLCJ2YWwiLCJ0ZXh0IiwiJG5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0Iiwic2V0QXR0cmlidXRlIiwicGFyZW50Tm9kZSIsInF1ZXJ5U2VsZWN0b3IiLCJ0eXBlIiwiZ2V0QXR0cmlidXRlIiwidG9nZ2xlQ2xhc3MiLCJzZWxlY3QiLCJpY29uIiwiZWwiLCIkaW5wdXRGaWVsZCIsImNvZGVJc05vdEVudGVyZWQiLCJpbnB1dFZhbCIsImtleSIsInByZXYiLCJmb2N1cyIsInJlcGxhY2VBbGwiLCJpbnB1dG1hc2siLCJlYWNoIiwiaSIsImtleUNvZGUiLCJjaGFyQ29kZSIsInJlcGxhY2UiLCJ0ZXN0IiwidmFsdWUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiJGN1cnJlbnRDdXJyZW5jeSIsInNob3ciLCJmYWRlT3V0IiwiaHRtbCIsInNldENyeXB0b0Nhc2hWaWV3Iiwic2V0SXRlbSIsInZhcmlhYmxlV2lkdGgiLCJzd2lwZSIsIm5vdCIsInByZXZBcnJvdyIsImZhZGVUb2dnbGUiLCJpbmZpbml0ZSIsInNsaWRlc1RvU2hvdyIsImFUZXh0Iiwic2xpY2siLCJjZW50ZXJNb2RlIiwibmV4dEFycm93IiwidmFyaWFibGVIZWlnaHQiLCIkZ3JvdXBEcm9wZG93bklubmVyIiwic2xpZGVEb3duIl0sIm1hcHBpbmdzIjoiYUFBQUEsT0FBT0MsT0FBUyxXQUFoQkQsRUFBQUEsVUFBQUUsR0FBZ0IsU0FBQSxTQUFBQyxHQUdkQyxFQUFBRCxFQUFBRSxRQUFBQyxRQUFBLHFCQUFBQyxRQUNBSCxFQUFBLHFCQUFnQkUsWUFBUSw0QkFBNkJFLEtBQUEsMkJBQUFDLFFBQUEsUUFNdkRMLEVBQUFBLFdBQUNGLEdBQVlBLFNBQWIsU0FBQUMsR0FDRSxJQUFNTyxFQUFRTixFQUFFRCxFQUFFUSxlQUNaTixFQUFTSyxFQUFNRSxLQUFLLGdCQUNwQkMsRUFBUUgsRUFBTUosUUFBUSxZQUc1QkksRUFBQUEsS0FBTUksdUJBQVNDLFlBQWYsc0JBRUFGLEVBQUFBLFNBQVcsc0JBRVpBLEVBRURMLEtBQUEsb0JBQUFRLEtBQUEsR0FIRUgsRUFBTUwsS0FBTixrQ0FBQVMsT0FBNkNaLEVBQTdDLE9BQXlEYSxPQUFPLFFBT2hFZCxFQUFBLFFBQUtNLEdBQUFBLFFBQU1TLDBCQUFTLFNBQUFoQixHQUNsQixJQUFBTyxFQUFNVSxFQUFBQSxFQUFBQSxlQUVOVixJQUFBQSxFQUFNVyxTQUFVWCwyQkFBY0gsT0FBOUIsQ0FGQSxJQUFNYSxFQUFxQlYsRUFBTVksU0FLakNaLEVBQU1hLFNBQUFBLFNBQWVDLDBCQUF3QkMsVUFBWUMsRUFBS0osVUFDNURaLEVBQUFXLFVBQWNNLEVBQUVDLFFBQWhCLHNCQUdBLElBQUFMLEVBQUFDLE1BQW1CSyxLQUFBbkIsRUFBQW9CLE9BQUFMLFlBQUFDLE1BQUEsU0FBQUMsRUFBQUksR0FLckJyQixHQUpJaUIs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VVgsRUFBTVksVUFDbkVaLEVBQU1XLFVBQVVYLEVBQU1KLFFBQVEsdUJBRzlCLElBQU1pQixFQUFlQyxNQUFNSyxLQUFLbkIsRUFBTW9CLE9BQU9MLFlBQVlDLE1BQUssU0FBQ0MsRUFBR0ksR0FJaEUsR0FIY0osRUFBRUMsVUFDRkcsRUFBRUgsVUFHZCxPQUFRLEtBSVpsQixFQUFNb0IsT0FBT0wsV0FBV08sU0FDeEJvRSxFQUFvQmxFLE9BQU9YLEdBRzdCYixFQUFNSixRQUFRLHNCQUFzQnVELFlBQVksNkJBQTZCckQsS0FBSyw0QkFBNEIwQyxZQUFZLFFBRTFIOUMsRUFBRSxzQkFBc0JGLEdBQUcsU0FBUyxTQUFBQyxHQUNwQyxJQUFNTyxFQUFRTixFQUFFRCxFQUFFUSxlQUVsQlAsRUFBRSxzQkFBc0JLLFFBQVEsS0FFNUJDLEVBQU02QixTQUFTLDZCQUNqQjdCLEVBQU1LLFlBQVksOEJBRWxCWCxFQUFFLDhCQUE4QlcsWUFBWSw2QkFDNUNMLEVBQU1JLFNBQVMsNkJBQ2ZKLEVBQU1ZLFNBQVNkLEtBQUssc0JBQXNCNkYsVUFBVSxTQUd0RGpHLEVBQUUsa0JBQWtCNEYsTUFBTSxDQUMxQlIsZUFBZSxFQUNmVyxnQkFBZ0IsRUFDaEJGLFlBQVksRUFDWlIsT0FBTyxFQUNQRSxVQUFXLG9FQUNYTyxVQUFXIiwiZmlsZSI6ImNvbW1vbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cub25sb2FkID0gKCkgPT4ge1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICAvLyBoaWRlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG4gIGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcuanMtdGFicy1kcm9wZG93bicpLmxlbmd0aCkge1xuICAgICQoJy5qcy10YWJzLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2pzLXRhYnMtZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy10YWJzLWRyb3Bkb3duLWlubmVyJykuc2xpZGVVcCgzMDApO1xuICB9XG59KTtcblxuLy8gdGFicyBoYW5kbGluZ1xuJCgnLmpzLXRhYicpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1jb250ZW50Jyk7XG4gIGNvbnN0ICR0YWJzID0gJHRoaXMuY2xvc2VzdCgnLmpzLXRhYnMnKTtcblxuICAkdGFicy5maW5kKCcudGFic19faXRlbS0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ3RhYnNfX2l0ZW0tLWFjdGl2ZScpO1xuICAkdGhpcy5hZGRDbGFzcygndGFic19faXRlbS0tYWN0aXZlJyk7XG5cbiAgJHRhYnMuZmluZCgnLmpzLXRhYnMtY29udGVudCcpLmhpZGUoMCk7XG4gICR0YWJzLmZpbmQoYC5qcy10YWJzLWNvbnRlbnRbZGF0YS1jb250ZW50PVwiJHt0YXJnZXR9XCJdYCkuZmFkZUluKDUwMCk7XG59KTtcblxuLy8gdGFicyBkcm9wZG93blxuJCgnYm9keScpLm9uKCdjbGljaycsICcuanMtdGFicy1kcm9wZG93bi1pdGVtJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBcbiAgaWYgKCEkdGhpcy5zaWJsaW5ncygnLmpzLXRhYnMtZHJvcGRvd24taW5uZXInKS5sZW5ndGgpIHtcbiAgICBjb25zdCAkdGFic0Ryb3Bkb3duSW5uZXIgPSAkdGhpcy5wYXJlbnQoKTtcbiAgICAkdGhpcy5wYXJlbnQoKS5zaWJsaW5ncygnLmpzLXRhYnMtZHJvcGRvd24taXRlbScpLnByZXBlbmRUbygkdGhpcy5wYXJlbnQoKSk7XG4gICAgJHRoaXMucHJlcGVuZFRvKCR0aGlzLmNsb3Nlc3QoJy5qcy10YWJzLWRyb3Bkb3duJykpO1xuXG4gICAgLy8gc29ydCBlbGVtZW50c1xuICAgIGNvbnN0ICRzb3J0ZWRJdGVtcyA9IEFycmF5LmZyb20oJHRoaXMubmV4dCgpLmNoaWxkcmVuKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IGFUZXh0ID0gYS5pbm5lclRleHQ7XG4gICAgICBjb25zdCBiVGV4dCA9IGIuaW5uZXJUZXh0O1xuICBcbiAgICAgIGlmIChhVGV4dCA8IGJUZXh0KSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICR0aGlzLm5leHQoKS5jaGlsZHJlbigpLnJlbW92ZSgpO1xuICAgICR0YWJzRHJvcGRvd25Jbm5lci5hcHBlbmQoJHNvcnRlZEl0ZW1zKTtcbiAgfVxuXG4gICR0aGlzLmNsb3Nlc3QoJy5qcy10YWJzLWRyb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ2pzLXRhYnMtZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy10YWJzLWRyb3Bkb3duLWlubmVyJykuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBlID0+IHtcbiAgLy8gaGlkZSBkcm9wZG93biBvbiBvdXRlciBjbGlja1xuICBpZighJChlLnRhcmdldCkuY2xvc2VzdCgnLmpzLXBvcHVwLWRyb3Bkb3duJykubGVuZ3RoKSB7XG4gICAgJCgnLmpzLXBvcHVwLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2pzLXBvcHVwLWRyb3Bkb3duLS1hY3RpdmUnKS5maW5kKCcuanMtcG9wdXAtZHJvcGRvd24taW5uZXInKS5zbGlkZVVwKDMwMCk7XG4gIH1cbn0pO1xuXG4vLyBwb3B1cCBoYW5kbGluZ1xubGV0IHRvcE9mZnNldCA9IDA7XG5cbmNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgdG9wT2Zmc2V0ID0gd2luZG93LnNjcm9sbFk7XG5cbiAgJCgnYm9keScpLmNzcyh7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgbWFyZ2luVG9wOiBgJHstdG9wT2Zmc2V0fXB4YFxuICB9KTtcbn07XG5cbmNvbnN0IHNob3dPdmVyZmxvdyA9ICgpID0+IHtcbiAgJCgnYm9keScpLmNzcyh7XG4gICAgcG9zaXRpb246ICdzdGF0aWMnLFxuICAgIG1hcmdpblRvcDogJzAnXG4gIH0pO1xuXG4gIHdpbmRvdy5zY3JvbGxUbygwLCB0b3BPZmZzZXQpO1xufTtcblxuY29uc3QgY2xvc2VQb3B1cCA9IChlLCAkdGhpcykgPT4ge1xuICBpZighJChlLnRhcmdldCkuY2xvc2VzdCgnLnBvcHVwX193aW5kb3cnKS5sZW5ndGggfHwgISR0aGlzLmhhc0NsYXNzKCdqcy1wb3B1cCcpKSB7XG4gICAgc2hvd092ZXJmbG93KCk7XG4gIFxuICAgICR0aGlzLmNsb3Nlc3QoJy5qcy1wb3B1cCcpLmhpZGUoMCk7XG5cdH1cbn07XG5cbmNvbnN0IG9wZW5Qb3B1cCA9ICRwb3B1cCA9PiB7XG4gIGhpZGVPdmVyZmxvdygpO1xuICBcbiAgJHBvcHVwLmZhZGVJbigzMDApO1xufTtcblxuJCgnLmpzLW9wZW4tcG9wdXAnKS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtcG9wdXAnKTtcbiAgY29uc3QgJHBvcHVwID0gJChgLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCIke3RhcmdldH1cIl1gKTtcbiAgb3BlblBvcHVwKCRwb3B1cCk7XG59KTtcblxuJCgnLmpzLWNsb3NlLXBvcHVwJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNsb3NlUG9wdXAoZSwgJChlLmN1cnJlbnRUYXJnZXQpKTtcbn0pO1xuXG4vLyBwb3B1cCBkcm9wZG93blxuJCgnLmpzLXBvcHVwLWRyb3Bkb3duLWl0ZW0nKS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cbiAgaWYgKCEkdGhpcy5zaWJsaW5ncygnLmpzLXBvcHVwLWRyb3Bkb3duLWlubmVyJykubGVuZ3RoKSB7XG4gICAgJHRoaXMucGFyZW50KCkuc2libGluZ3MoJy5qcy1wb3B1cC1kcm9wZG93bi1pdGVtJykucHJlcGVuZFRvKCR0aGlzLnBhcmVudCgpKTtcbiAgICAkdGhpcy5wcmVwZW5kVG8oJHRoaXMuY2xvc2VzdCgnLmpzLXBvcHVwLWRyb3Bkb3duJykpO1xuICB9XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmpzLXBvcHVwLWRyb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ2pzLXBvcHVwLWRyb3Bkb3duLS1hY3RpdmUnKS5maW5kKCcuanMtcG9wdXAtZHJvcGRvd24taW5uZXInKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG5cbi8vIHBvcHVwIGZvcm1zIGhhbmRsaW5nXG4kKCcuanMtZm9ybS13aXRoZHJhdycpLm9uKCdzdWJtaXQnLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgJGFkZHJlc3MgPSAkdGhpcy5maW5kKCdpbnB1dFtuYW1lPVwiZXRoV2l0aGRyYXdhbFdhbGxldEFkZHJlc3NcIl0nKTtcbiAgY29uc3QgJGFtb3VudCA9ICR0aGlzLmZpbmQoJ2lucHV0W25hbWU9XCJldGhTdW1Ub1dpdGhkcmF3XCJdJyk7XG4gIGxldCBpc1ZhbGlkID0gdHJ1ZTtcblxuICBpZiAoJGFkZHJlc3MudmFsKCkubGVuZ3RoICE9PSAzNCkge1xuICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAkYWRkcmVzcy5jbG9zZXN0KCcuaW5wdXQnKS5hZGRDbGFzcygnaW5wdXQtLWVycm9yJyk7XG4gIH1cblxuICBpZiAoJGFtb3VudC52YWwoKSA8ICRhbW91bnQuYXR0cignZGF0YS1taW4nKSkge1xuICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAkYW1vdW50LmNsb3Nlc3QoJy5pbnB1dCcpLmFkZENsYXNzKCdpbnB1dC0tZXJyb3InKS5maW5kKCcuaW5wdXRfX2Vycm9yJykudGV4dChg0JzQuNC90LjQvNGD0LwgJHskYW1vdW50LmF0dHIoJ2RhdGEtbWluJyl9YCk7XG4gIH0gZWxzZSBpZiAoJGFtb3VudC52YWwoKSA+ICRhbW91bnQuYXR0cignZGF0YS1tYXgnKSkge1xuICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAkYW1vdW50LmNsb3Nlc3QoJy5pbnB1dCcpLmFkZENsYXNzKCdpbnB1dC0tZXJyb3InKS5maW5kKCcuaW5wdXRfX2Vycm9yJykudGV4dCgn0J3QtdC00L7RgdGC0LDRgtC+0YfQvdC+INGB0YDQtdC00YHRgtCyJyk7XG4gIH1cblxuICBpZiAoaXNWYWxpZCkge1xuICAgIC8vIHNlbmQgZm9ybVxuICB9XG59KTtcblxuJCgnLmpzLWZvcm0tdHJhbnNmZXInKS5vbignc3VibWl0JywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIGNvbnN0ICRuYW1lID0gJHRoaXMuZmluZCgnaW5wdXRbbmFtZT1cInJlY2lwaWVudE5hbWVcIl0nKTtcbiAgY29uc3QgJGFtb3VudCA9ICR0aGlzLmZpbmQoJ2lucHV0W25hbWU9XCJ0cmFuc2ZlckFtb3VudFwiXScpO1xuICBsZXQgaXNWYWxpZCA9IHRydWU7XG5cbiAgaWYgKCRuYW1lLnZhbCgpLmxlbmd0aCAhPT0gMzQpIHtcbiAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgJG5hbWUuY2xvc2VzdCgnLmlucHV0JykuYWRkQ2xhc3MoJ2lucHV0LS1lcnJvcicpO1xuICB9XG5cbiAgaWYgKCRhbW91bnQudmFsKCkgPiAkYW1vdW50LmF0dHIoJ2RhdGEtbWF4JykpIHtcbiAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgJGFtb3VudC5jbG9zZXN0KCcuaW5wdXQnKS5hZGRDbGFzcygnaW5wdXQtLWVycm9yJykuZmluZCgnLmlucHV0X19lcnJvcicpLnRleHQoJ9Cd0LXQtNC+0YHRgtCw0YLQvtGH0L3QviDRgdGA0LXQtNGB0YLQsicpO1xuICB9XG5cbiAgaWYgKGlzVmFsaWQpIHtcbiAgICAvLyBzZW5kIGZvcm1cbiAgfVxufSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS50YXJnZXQpO1xuXG4gIC8vIGhpZGUgZHJvcGRvd24gb24gb3V0ZXIgY2xpY2tcbiAgaWYoISR0aGlzLmhhc0NsYXNzKCdqcy10ZWwtZHJvcGRvd24nKSAmJiAhJHRoaXMuaGFzQ2xhc3MoJ2lucHV0X19maWVsZCcpKSB7XG4gICAgJCgnLmpzLXRlbC1kcm9wZG93bicpLnJlbW92ZUNsYXNzKCdqcy10ZWwtZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy10ZWwtZHJvcGRvd24taW5uZXInKS5zbGlkZVVwKDMwMCk7XG4gIH1cbn0pO1xuXG4vLyBjb3B5IHRvIGNsaXBib2FyZFxuJCgnLmpzLWlucHV0LWNvcHknKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dCA9IGUuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gIGNvbnN0IHR5cGUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgXG4gIGlucHV0LnNlbGVjdCgpO1xuICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCA5OTk5OSk7XG4gIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XG4gIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsIHR5cGUpO1xufSk7XG5cbi8vIHJlbW92ZSBlcnJvciB0ZXh0XG4kKCcuaW5wdXQnKS5vbignaW5wdXQnLCBlID0+IHtcbiAgJChlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pbnB1dCcpLnJlbW92ZUNsYXNzKCdpbnB1dC0tZXJyb3InKTtcbn0pO1xuXG4vLyBzZXQgbWF4IHRvIHN1bSBpbnB1dFxuJCgnLmpzLWlucHV0LW1heCcpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICAkdGhpcy5zaWJsaW5ncygnLmlucHV0X19maWVsZCcpLnZhbCgkdGhpcy5zaWJsaW5ncygnLmlucHV0X19maWVsZCcpLmF0dHIoJ2RhdGEtbWF4JykpO1xuICAkdGhpcy5jbG9zZXN0KCcuaW5wdXQnKS5yZW1vdmVDbGFzcygnaW5wdXQtLWVycm9yJyk7XG59KTtcblxuLy8gdGVsIGRyb3Bkb3duXG4kKCcuanMtdGVsLWRyb3Bkb3duJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICQoZS5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnanMtdGVsLWRyb3Bkb3duLS1hY3RpdmUnKS5maW5kKCcuanMtdGVsLWRyb3Bkb3duLWlubmVyJykuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuXG4kKCcuanMtdGVsLWRyb3Bkb3duLWl0ZW0nKS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIGNvbnN0IGljb24gPSAkdGhpcy5hdHRyKCdkYXRhLWljb24nKTtcblxuICAkdGhpcy5jbG9zZXN0KCcuanMtdGVsLWRyb3Bkb3duJykuYXR0cignZGF0YS1pY29uJywgaWNvbik7XG4gICR0aGlzLmNsb3Nlc3QoJy5pbnB1dCcpLmZpbmQoJ2lucHV0JykuYXR0cigncGxhY2Vob2xkZXInLCAkdGhpcy5hdHRyKCdkYXRhLW1hc2snKS5yZXBsYWNlQWxsKCc5JywgJ18nKSkuaW5wdXRtYXNrKCR0aGlzLmF0dHIoJ2RhdGEtbWFzaycpKTtcbn0pO1xuXG4vLyBtYXNraW5nXG4kKCdpbnB1dFt0eXBlPVwidGVsXCJdJykuZWFjaCgoaSwgZWwpID0+IHtcbiAgJChlbCkuaW5wdXRtYXNrKCQoZWwpLmF0dHIoJ2RhdGEtbWFzaycpKTtcbn0pO1xuXG4vLyB0b2dnbGUgdmlzaWJpbGl0eVxuJCgnLmpzLWlucHV0LXRvZ2dsZScpLm9uKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0ICRpbnB1dEZpZWxkID0gJChlLmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCdpbnB1dCcpO1xuXG4gICRpbnB1dEZpZWxkLmF0dHIoJ3R5cGUnLCAkaW5wdXRGaWVsZC5hdHRyKCd0eXBlJykgPT09ICdwYXNzd29yZCcgPyAndGV4dCcgOiAncGFzc3dvcmQnKTtcbn0pO1xuICAkKCcuY29kZV9faW5wdXQnKS5vbigna2V5dXAnLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIGNvbnN0IGlucHV0VmFsID0gJHRoaXMudmFsKCk7XG4gIGNvbnN0IGtleSA9IGUua2V5Q29kZSB8fCBlLmNoYXJDb2RlO1xuICBsZXQgY29kZUlzTm90RW50ZXJlZCA9IGZhbHNlO1xuXG4gICR0aGlzLnZhbChpbnB1dFZhbC5yZXBsYWNlKC9bXjAtOV0vZywgJycpKTtcblxuICBpZiAoIS9bXjAtOV0vZy50ZXN0KGlucHV0VmFsKSAmJiBrZXkgIT0gOCAmJiBrZXkgIT0gNDYpIHtcbiAgICAkdGhpcy5uZXh0KCkuZm9jdXMoKTtcbiAgfSBlbHNlIGlmICgoa2V5ID09IDggfHwga2V5ID09IDQ2KSAmJiBpbnB1dFZhbCA9PT0gJycpIHtcbiAgICAkdGhpcy5wcmV2KCkuZm9jdXMoKTtcbiAgfVxuXG4gICR0aGlzLnBhcmVudCgpLmZpbmQoJ2lucHV0JykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICBpZiAoZWwudmFsdWUgPT09ICcnKSB7XG4gICAgICBjb2RlSXNOb3RFbnRlcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICghY29kZUlzTm90RW50ZXJlZCkge1xuICAgICR0aGlzLnBhcmVudCgpLmFkZENsYXNzKCdjb2RlLS1lbnRlcmVkJyk7XG4gICAgJHRoaXMucGFyZW50KCkucGFyZW50KCkuZmluZCgnLmpzLWNvZGUtdGl0bGUnKS5oaWRlKCk7XG4gICAgJHRoaXMucGFyZW50KCkucGFyZW50KCkuZmluZCgnLmpzLWNvZGUtcmVzdWx0Jykuc2hvdygpO1xuICB9XG59KTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUudGFyZ2V0KTtcblxuICAvLyBoaWRlIG1lbnUgb24gb3V0ZXIgY2xpY2tcbiAgaWYoISR0aGlzLmNsb3Nlc3QoJy5qcy1tZW51JykubGVuZ3RoICYmICEkdGhpcy5oYXNDbGFzcygnanMtYnVyZ2VyJykpIHtcbiAgICAkKCcuanMtbWVudScpLnJlbW92ZUNsYXNzKCdoZWFkZXJfX21lbnUtLWFjdGl2ZScpO1xuICB9XG4gIFxuICAvLyBoaWRlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG4gIGlmKCEkdGhpcy5jbG9zZXN0KCcuanMtaGVhZGVyLWRyb3Bkb3duJykubGVuZ3RoKSB7XG4gICAgJCgnLmpzLWhlYWRlci1kcm9wZG93bicpLnJlbW92ZUNsYXNzKCdqcy1oZWFkZXItZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy1oZWFkZXItZHJvcGRvd24taW5uZXInKS5zbGlkZVVwKDMwMCk7XG4gIH1cbiAgXG4gIC8vIGhpZGUgY29udGV4dCBtZW51IG9uIG91dGVyIGNsaWNrXG4gIGlmKCEkdGhpcy5jbG9zZXN0KCcuaGVhZGVyX19jb250ZXh0JykubGVuZ3RoIHx8ICR0aGlzLmhhc0NsYXNzKCdqcy1vcGVuLXBvcHVwJykpIHtcbiAgICAkKCcuanMtaGVhZGVyLWNvbnRleHQtbWVudScpLmZhZGVPdXQoMzAwKTtcbiAgfVxufSk7XG5cbi8vIGhlYWRlciBtZW51XG4kKCcuanMtYnVyZ2VyJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAkKCcuanMtbWVudScpLmFkZENsYXNzKCdoZWFkZXJfX21lbnUtLWFjdGl2ZScpO1xuXG59KTtcblxuJCgnLmpzLW1lbnUtY2xvc2UnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICQoJy5qcy1tZW51JykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fbWVudS0tYWN0aXZlJyk7XG59KTtcblxuLy8gaGVhZGVyIGRyb3Bkb3duXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbmN5U2hvdycpKSB7XG4gIGNvbnN0ICRjdXJyZW50Q3VycmVuY3kgPSAkKGAuanMtaGVhZGVyLWRyb3Bkb3duLWl0ZW1bZGF0YS1jdXJyZW5jeT1cIiR7bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbmN5U2hvdycpfVwiXWApO1xuXG4gICRjdXJyZW50Q3VycmVuY3kucGFyZW50KCkuc2libGluZ3MoJy5qcy1oZWFkZXItZHJvcGRvd24taXRlbScpLnByZXBlbmRUbygkY3VycmVudEN1cnJlbmN5LnBhcmVudCgpKTtcbiAgJGN1cnJlbnRDdXJyZW5jeS5wcmVwZW5kVG8oJGN1cnJlbnRDdXJyZW5jeS5jbG9zZXN0KCcuanMtaGVhZGVyLWRyb3Bkb3duJykpO1xufVxuXG4kKCcuanMtaGVhZGVyLWRyb3Bkb3duLWl0ZW0nKS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cbiAgaWYgKCEkdGhpcy5zaWJsaW5ncygnLmpzLWhlYWRlci1kcm9wZG93bi1pbm5lcicpLmxlbmd0aCkge1xuICAgICR0aGlzLnBhcmVudCgpLnNpYmxpbmdzKCcuanMtaGVhZGVyLWRyb3Bkb3duLWl0ZW0nKS5wcmVwZW5kVG8oJHRoaXMucGFyZW50KCkpO1xuICAgICR0aGlzLnByZXBlbmRUbygkdGhpcy5jbG9zZXN0KCcuanMtaGVhZGVyLWRyb3Bkb3duJykpO1xuICB9XG5cbiAgaWYgKCR0aGlzLmF0dHIoJ2RhdGEtY3VycmVuY3knKSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW5jeVNob3cnLCAkdGhpcy5hdHRyKCdkYXRhLWN1cnJlbmN5JykpO1xuICB9XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmpzLWhlYWRlci1kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdqcy1oZWFkZXItZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy1oZWFkZXItZHJvcGRvd24taW5uZXInKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG5cbi8vIGNvbnRleHQgbWVudVxuJCgnLmpzLWhlYWRlci1jb250ZXh0Jykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gICQoJy5qcy1oZWFkZXItY29udGV4dC1tZW51Jykubm90KCR0aGlzLnNpYmxpbmdzKCkpLmZhZGVPdXQoMzAwKTtcbiAgJHRoaXMuc2libGluZ3MoJy5qcy1oZWFkZXItY29udGV4dC1tZW51JykuZmFkZVRvZ2dsZSgzMDApO1xufSk7XG5cbi8vIGNyeXB0byBzd2l0Y2hcbmNvbnN0IHNldENyeXB0b0Nhc2hWaWV3ID0gdHlwZSA9PiB7XG4gIGlmICh0eXBlID09PSAnY2FzaCcpIHtcbiAgICAkKCcuaGVhZGVyX19jcnlwdG8gLmpzLWhlYWRlci1kcm9wZG93bi1pdGVtJykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICQoZWwpLmh0bWwoYDxzcGFuPiQ8L3NwYW4+JHskKGVsKS5hdHRyKCdkYXRhLWNhc2gnKX1gKTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1oZWFkZXItc3dpdGNoJykuYXR0cignZGF0YS10eXBlJywgJ2Nhc2gnKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnY3J5cHRvJykge1xuICAgICQoJy5oZWFkZXJfX2NyeXB0byAuanMtaGVhZGVyLWRyb3Bkb3duLWl0ZW0nKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgJChlbCkuaHRtbCgkKGVsKS5hdHRyKCdkYXRhLWNyeXB0bycpKTtcbiAgICB9KTtcblxuICAgICQoJy5qcy1oZWFkZXItc3dpdGNoJykuYXR0cignZGF0YS10eXBlJywgJ2NyeXB0bycpO1xuICB9XG59O1xuXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NyeXB0b0Nhc2hWaWV3JykgPT09ICdjYXNoJykge1xuICBzZXRDcnlwdG9DYXNoVmlldygnY2FzaCcpO1xufSBlbHNlIHtcbiAgc2V0Q3J5cHRvQ2FzaFZpZXcoJ2NyeXB0bycpO1xufVxuXG4kKCcuanMtaGVhZGVyLXN3aXRjaCcpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICBpZiAoJHRoaXMuYXR0cignZGF0YS10eXBlJykgPT09ICdjcnlwdG8nKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NyeXB0b0Nhc2hWaWV3JywgJ2Nhc2gnKTtcblxuICAgIHNldENyeXB0b0Nhc2hWaWV3KCdjYXNoJyk7XG4gIH0gZWxzZSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NyeXB0b0Nhc2hWaWV3JywgJ2NyeXB0bycpO1xuXG4gICAgc2V0Q3J5cHRvQ2FzaFZpZXcoJ2NyeXB0bycpO1xuICB9XG59KTtcbiAgJCgnLmpzLXNsaWRlcicpLnNsaWNrKHtcbiAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgc3dpcGU6IGZhbHNlLFxuICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwic2xpZGVyX19jYXJvdXNlbC1hcnJvdyBzbGlkZXJfX2Nhcm91c2VsLWFycm93LS1wcmV2XCI+PC9kaXY+JyxcbiAgbmV4dEFycm93OiAnPGRpdiBjbGFzcz1cInNsaWRlcl9fY2Fyb3VzZWwtYXJyb3cgc2xpZGVyX19jYXJvdXNlbC1hcnJvdy0tbmV4dFwiPjwvZGl2Pidcbn0pO1xuICAkKCcuanMtZ2FtZXMtc2xpZGVyJykuc2xpY2soe1xuICBpbmZpbml0ZTogdHJ1ZSxcbiAgc3dpcGU6IGZhbHNlLFxuICBzbGlkZXNUb1Nob3c6IDYsXG4gIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gIHByZXZBcnJvdzogJzxkaXYgY2xhc3M9XCJnYW1lc19fc2xpZGVyLWFycm93IGdhbWVzX19zbGlkZXItYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwiZ2FtZXNfX3NsaWRlci1hcnJvdyBnYW1lc19fc2xpZGVyLWFycm93LS1uZXh0XCI+PC9kaXY+J1xufSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICAvLyBoaWRlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG4gIGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcuanMtZ3JvdXAtZHJvcGRvd24nKS5sZW5ndGgpIHtcbiAgICAkKCcuanMtZ3JvdXAtZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnanMtZ3JvdXAtZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy1ncm91cC1kcm9wZG93bi1pbm5lcicpLnNsaWRlVXAoMzAwKTtcbiAgfVxufSk7XG5cbi8vIGdyb3VwIGRyb3Bkb3duXG4kKCdib2R5Jykub24oJ2NsaWNrJywgJy5qcy1ncm91cC1kcm9wZG93bi1pdGVtJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBcbiAgaWYgKCEkdGhpcy5zaWJsaW5ncygnLmpzLWdyb3VwLWRyb3Bkb3duLWlubmVyJykubGVuZ3RoKSB7XG4gICAgY29uc3QgJGdyb3VwRHJvcGRvd25Jbm5lciA9ICR0aGlzLnBhcmVudCgpO1xuICAgICR0aGlzLnBhcmVudCgpLnNpYmxpbmdzKCcuanMtZ3JvdXAtZHJvcGRvd24taXRlbScpLnByZXBlbmRUbygkdGhpcy5wYXJlbnQoKSk7XG4gICAgJHRoaXMucHJlcGVuZFRvKCR0aGlzLmNsb3Nlc3QoJy5qcy1ncm91cC1kcm9wZG93bicpKTtcblxuICAgIC8vIHNvcnQgZWxlbWVudHNcbiAgICBjb25zdCAkc29ydGVkSXRlbXMgPSBBcnJheS5mcm9tKCR0aGlzLm5leHQoKS5jaGlsZHJlbigpKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBhVGV4dCA9IGEuaW5uZXJUZXh0O1xuICAgICAgY29uc3QgYlRleHQgPSBiLmlubmVyVGV4dDtcbiAgXG4gICAgICBpZiAoYVRleHQgPCBiVGV4dCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkdGhpcy5uZXh0KCkuY2hpbGRyZW4oKS5yZW1vdmUoKTtcbiAgICAkZ3JvdXBEcm9wZG93bklubmVyLmFwcGVuZCgkc29ydGVkSXRlbXMpO1xuICB9XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmpzLWdyb3VwLWRyb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ2pzLWdyb3VwLWRyb3Bkb3duLS1hY3RpdmUnKS5maW5kKCcuanMtZ3JvdXAtZHJvcGRvd24taW5uZXInKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG4gICQoJy5sZXZlbHNfX2l0ZW0taGVhZCcpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICAkKCcubGV2ZWxzX19pdGVtLWRlc2MnKS5zbGlkZVVwKDMwMCk7XG5cbiAgaWYgKCR0aGlzLmhhc0NsYXNzKCdsZXZlbHNfX2l0ZW0taGVhZC0tYWN0aXZlJykpIHtcbiAgICAkdGhpcy5yZW1vdmVDbGFzcygnbGV2ZWxzX19pdGVtLWhlYWQtLWFjdGl2ZScpO1xuICB9IGVsc2Uge1xuICAgICQoJy5sZXZlbHNfX2l0ZW0taGVhZC0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2xldmVsc19faXRlbS1oZWFkLS1hY3RpdmUnKTtcbiAgICAkdGhpcy5hZGRDbGFzcygnbGV2ZWxzX19pdGVtLWhlYWQtLWFjdGl2ZScpO1xuICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJy5sZXZlbHNfX2l0ZW0tZGVzYycpLnNsaWRlRG93bigzMDApO1xuICB9XG59KTtcbiAgJCgnLmpzLXZpcC1zbGlkZXInKS5zbGljayh7XG4gIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gIHZhcmlhYmxlSGVpZ2h0OiB0cnVlLFxuICBjZW50ZXJNb2RlOiB0cnVlLFxuICBzd2lwZTogZmFsc2UsXG4gIHByZXZBcnJvdzogJzxkaXYgY2xhc3M9XCJ2aXBfX2ZlZWRiYWNrLWFycm93IHZpcF9fZmVlZGJhY2stYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwidmlwX19mZWVkYmFjay1hcnJvdyB2aXBfX2ZlZWRiYWNrLWFycm93LS1uZXh0XCI+PC9kaXY+J1xufSk7XG5cbn0iXX0=
