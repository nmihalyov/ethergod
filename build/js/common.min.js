"use strict";window.onload=function(){$(document).on("click",(function(e){$(e.target).closest(".js-tabs-dropdown").length||$(".js-tabs-dropdown").removeClass("js-tabs-dropdown--active").find(".js-tabs-dropdown-inner").slideUp(300)})),$(".js-tab").on("click",(function(e){var t=$(e.currentTarget),r=t.attr("data-content"),n=t.closest(".js-tabs");n.find(".tabs__item--active").removeClass("tabs__item--active"),t.addClass("tabs__item--active"),n.find(".js-tabs-content").hide(0),n.find('.js-tabs-content[data-content="'.concat(r,'"]')).fadeIn(500)})),$("body").on("click",".js-tabs-dropdown-item",(function(e){var t=$(e.currentTarget);if(!t.siblings(".js-tabs-dropdown-inner").length){var r=t.parent();t.parent().siblings(".js-tabs-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-tabs-dropdown"));var n=Array.from(t.next().children()).sort((function(e,t){if(e.innerText<t.innerText)return-1}));t.next().children().remove(),r.append(n)}t.closest(".js-tabs-dropdown").toggleClass("js-tabs-dropdown--active").find(".js-tabs-dropdown-inner").slideToggle(300)})),$(document).on("click",(function(e){$(e.target).closest(".js-popup-dropdown").length||$(".js-popup-dropdown").removeClass("js-popup-dropdown--active").find(".js-popup-dropdown-inner").slideUp(300)}));var e=0,t=function(){e=window.scrollY,$("body").css({position:"fixed",marginTop:"".concat(-e,"px")})},r=function(){$("body").css({position:"static",marginTop:"0"}),window.scrollTo(0,e)};if($(".js-open-popup").on("click",(function(e){var r=$(e.currentTarget).attr("data-popup");!function(e){t(),e.fadeIn(300)}($('.js-popup[data-popup="'.concat(r,'"]')))})),$(".js-close-popup").on("click",(function(e){!function(e,t){$(e.target).closest(".popup__window").length&&t.hasClass("js-popup")||(r(),t.closest(".js-popup").hide(0))}(e,$(e.currentTarget))})),$(".js-popup-dropdown-item").on("click",(function(e){var t=$(e.currentTarget);t.siblings(".js-popup-dropdown-inner").length||(t.parent().siblings(".js-popup-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-popup-dropdown"))),t.closest(".js-popup-dropdown").toggleClass("js-popup-dropdown--active").find(".js-popup-dropdown-inner").slideToggle(300)})),$(".js-form-withdraw").on("submit",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.find('input[name="ethWithdrawalWalletAddress"]'),n=t.find('input[name="ethSumToWithdraw"]');34!==r.val().length&&(!1,r.closest(".input").addClass("input--error")),n.val()<n.attr("data-min")?(!1,n.closest(".input").addClass("input--error").find(".input__error").text("Минимум ".concat(n.attr("data-min")))):n.val()>n.attr("data-max")&&(!1,n.closest(".input").addClass("input--error").find(".input__error").text("Недостаточно средств"))})),$(".js-form-transfer").on("submit",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.find('input[name="recipientName"]'),n=t.find('input[name="transferAmount"]');34!==r.val().length&&(!1,r.closest(".input").addClass("input--error")),n.val()>n.attr("data-max")&&(!1,n.closest(".input").addClass("input--error").find(".input__error").text("Недостаточно средств"))})),$(document).on("click",(function(e){var t=$(e.target);t.hasClass("js-tel-dropdown")||t.hasClass("input__field")||$(".js-tel-dropdown").removeClass("js-tel-dropdown--active").find(".js-tel-dropdown-inner").slideUp(300)})),$(".js-input-copy").on("click",(function(e){e.preventDefault();var t=e.currentTarget.parentNode.querySelector("input"),r=t.getAttribute("type");t.setAttribute("type","text"),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),t.setAttribute("type",r)})),$(".input").on("input",(function(e){$(e.currentTarget).closest(".input").removeClass("input--error")})),$(".js-input-max").on("click",(function(e){var t=$(e.currentTarget);t.siblings(".input__field").val(t.siblings(".input__field").attr("data-max")),t.closest(".input").removeClass("input--error")})),$(".js-tel-dropdown").on("click",(function(e){e.preventDefault(),$(e.currentTarget).toggleClass("js-tel-dropdown--active").find(".js-tel-dropdown-inner").slideToggle(300)})),$(".js-tel-dropdown-item").on("click",(function(e){var t=$(e.currentTarget),r=t.attr("data-icon");t.closest(".js-tel-dropdown").attr("data-icon",r),t.closest(".input").find("input").attr("placeholder",t.attr("data-mask").replaceAll("9","_")).inputmask(t.attr("data-mask"))})),$('input[type="tel"]').each((function(e,t){$(t).inputmask($(t).attr("data-mask"))})),$(".js-input-toggle").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget).siblings("input");t.attr("type","password"===t.attr("type")?"text":"password")})),$(".code__input").on("keyup",(function(e){var t=$(e.currentTarget),r=t.val(),n=e.keyCode||e.charCode,s=!1;t.val(r.replace(/[^0-9]/g,"")),/[^0-9]/g.test(r)||8==n||46==n?8!=n&&46!=n||""!==r||t.prev().focus():t.next().focus(),t.parent().find("input").each((function(e,t){""===t.value&&(s=!0)})),s||(t.parent().addClass("code--entered"),t.parent().parent().find(".js-code-title").hide(),t.parent().parent().find(".js-code-result").show(),t.blur())})),$(document).on("click",(function(e){var t=$(e.target);t.closest(".js-menu").length||t.hasClass("js-burger")||t.closest(".js-burger").length||$(".js-menu").removeClass("header__menu--active"),t.closest(".js-header-dropdown").length||$(".js-header-dropdown").removeClass("js-header-dropdown--active").find(".js-header-dropdown-inner").slideUp(300),t.closest(".header__context").length&&!t.hasClass("js-open-popup")||$(".js-header-context-menu").fadeOut(300)})),$(".js-burger").on("click",(function(){$(".js-menu").addClass("header__menu--active"),$(window).innerWidth()<1199&&t()})),$(".js-menu-close").on("click",(function(){$(".js-menu").removeClass("header__menu--active"),$(window).innerWidth()<1199&&r()})),localStorage.getItem("currencyShow")){var n=$('.js-header-dropdown-item[data-currency="'.concat(localStorage.getItem("currencyShow"),'"]'));n.parent().siblings(".js-header-dropdown-item").prependTo(n.parent()),n.prependTo(n.closest(".js-header-dropdown"))}$(".js-header-dropdown-item").on("click",(function(e){var t=$(e.currentTarget);t.siblings(".js-header-dropdown-inner").length||(t.parent().siblings(".js-header-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-header-dropdown"))),t.attr("data-currency")&&localStorage.setItem("currencyShow",t.attr("data-currency")),t.closest(".js-header-dropdown").toggleClass("js-header-dropdown--active").find(".js-header-dropdown-inner").slideToggle(300)})),$(".js-header-context").on("click",(function(e){var t=$(e.currentTarget);$(".js-header-context-menu").not(t.siblings()).fadeOut(300),t.siblings(".js-header-context-menu").fadeToggle(300)}));var s=function(e){"cash"===e?($(".header__crypto .js-header-dropdown-item").each((function(e,t){$(t).html("<span>$</span>".concat($(t).attr("data-cash")))})),$(".js-header-switch").attr("data-type","cash")):"crypto"===e&&($(".header__crypto .js-header-dropdown-item").each((function(e,t){$(t).html($(t).attr("data-crypto"))})),$(".js-header-switch").attr("data-type","crypto"))};"cash"===localStorage.getItem("cryptoCashView")?s("cash"):s("crypto"),$(".js-header-switch").on("click",(function(e){"crypto"===$(e.currentTarget).attr("data-type")?(localStorage.setItem("cryptoCashView","cash"),s("cash")):(localStorage.setItem("cryptoCashView","crypto"),s("crypto"))})),$(".js-slider").slick({variableWidth:!0,centerMode:!0,swipe:!1,prevArrow:'<div class="slider__carousel-arrow slider__carousel-arrow--prev"></div>',nextArrow:'<div class="slider__carousel-arrow slider__carousel-arrow--next"></div>',responsive:[{breakpoint:1199,settings:{arrows:!1,swipe:!0,swipeToSlide:!0}}]}),$(".js-games-slider").slick({infinite:!0,swipe:!1,slidesToShow:6,variableWidth:!0,prevArrow:'<div class="games__slider-arrow games__slider-arrow--prev"></div>',nextArrow:'<div class="games__slider-arrow games__slider-arrow--next"></div>',responsive:[{breakpoint:1199,settings:{swipe:!0,swipeToSlide:!0,slidesToShow:3}}]}),$(document).on("click",(function(e){$(e.target).closest(".js-group-dropdown").length||$(".js-group-dropdown").removeClass("js-group-dropdown--active").find(".js-group-dropdown-inner").slideUp(300)})),$("body").on("click",".js-group-dropdown-item",(function(e){var t=$(e.currentTarget);if(!t.siblings(".js-group-dropdown-inner").length){var r=t.parent();t.parent().siblings(".js-group-dropdown-item").prependTo(t.parent()),t.prependTo(t.closest(".js-group-dropdown"));var n=Array.from(t.next().children()).sort((function(e,t){if(e.innerText<t.innerText)return-1}));t.next().children().remove(),r.append(n)}t.closest(".js-group-dropdown").toggleClass("js-group-dropdown--active").find(".js-group-dropdown-inner").slideToggle(300)})),$(".levels__item-head").on("click",(function(e){var t=$(e.currentTarget);$(".levels__item-desc").slideUp(300),t.hasClass("levels__item-head--active")?t.removeClass("levels__item-head--active"):($(".levels__item-head--active").removeClass("levels__item-head--active"),t.addClass("levels__item-head--active"),t.parent().find(".levels__item-desc").slideDown(300))})),$(".js-vip-slider").slick({variableWidth:!0,variableHeight:!0,centerMode:!0,swipe:!1,prevArrow:'<div class="vip__feedback-arrow vip__feedback-arrow--prev"></div>',nextArrow:'<div class="vip__feedback-arrow vip__feedback-arrow--next"></div>',responsive:[{breakpoint:1199,settings:{arrows:!1,swipe:!0,swipeToSlide:!0}}]}),$(document).on("click",(function(e){$(e.target).closest(".js-settings-filter").length||$(".js-settings-filter").removeClass("js-settings-filter--active").find(".js-settings-filter-inner").slideUp(300)})),$(".js-settings-filter-item").on("click",(function(e){var t=$(e.currentTarget);t.parent().hasClass("js-settings-filter")&&e.preventDefault(),t.closest(".js-settings-filter").toggleClass("js-settings-filter--active").find(".js-settings-filter-inner").slideToggle(300)}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCJvbiIsImUiLCIkIiwidGFyZ2V0IiwiY2xvc2VzdCIsImxlbmd0aCIsImZpbmQiLCJzbGlkZVVwIiwiJHRoaXMiLCJjdXJyZW50VGFyZ2V0IiwiYXR0ciIsIiR0YWJzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJjb25jYXQiLCJmYWRlSW4iLCJzaWJsaW5ncyIsIiR0YWJzRHJvcGRvd25Jbm5lciIsInByZXBlbmRUbyIsInBhcmVudCIsIiRzb3J0ZWRJdGVtcyIsIkFycmF5IiwiY2hpbGRyZW4iLCJzb3J0IiwiYSIsImlubmVyVGV4dCIsImZyb20iLCJuZXh0IiwiYiIsInJlbW92ZSIsImRvY3VtZW50IiwiYXBwZW5kIiwidG9wT2Zmc2V0IiwibWFyZ2luVG9wIiwiaGlkZU92ZXJmbG93Iiwic2Nyb2xsWSIsImNzcyIsInBvc2l0aW9uIiwic2hvd092ZXJmbG93IiwiY2xvc2VQb3B1cCIsInNjcm9sbFRvIiwiJHBvcHVwIiwiaGFzQ2xhc3MiLCIkYW1vdW50IiwiaXNWYWxpZCIsIiRhZGRyZXNzIiwic2xpZGVUb2dnbGUiLCJ2YWwiLCJ0ZXh0IiwiJG5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0Iiwic2V0QXR0cmlidXRlIiwicGFyZW50Tm9kZSIsInF1ZXJ5U2VsZWN0b3IiLCJ0eXBlIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0Iiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJpY29uIiwiJGlucHV0RmllbGQiLCJrZXlDb2RlIiwiY2hhckNvZGUiLCJpbnB1dFZhbCIsImtleSIsInByZXYiLCJmb2N1cyIsInJlcGxhY2VBbGwiLCJpbnB1dG1hc2siLCJlYWNoIiwiaSIsImVsIiwiY29kZUlzTm90RW50ZXJlZCIsInRlc3QiLCJ2YWx1ZSIsInNob3ciLCJibHVyIiwiJGN1cnJlbnRDdXJyZW5jeSIsImxvY2FsU3RvcmFnZSIsImZhZGVPdXQiLCJpbm5lcldpZHRoIiwiZ2V0SXRlbSIsInNldENyeXB0b0Nhc2hWaWV3IiwidG9nZ2xlQ2xhc3MiLCJzbGljayIsImNlbnRlck1vZGUiLCJub3QiLCJzd2lwZSIsImZhZGVUb2dnbGUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJhcnJvd3MiLCJpbmZpbml0ZSIsImh0bWwiLCJ2YXJpYWJsZVdpZHRoIiwic3dpcGVUb1NsaWRlIiwic2V0SXRlbSIsIiRncm91cERyb3Bkb3duSW5uZXIiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJhVGV4dCIsInJlc3BvbnNpdmUiLCJiVGV4dCIsInNsaWRlRG93biIsInZhcmlhYmxlSGVpZ2h0Il0sIm1hcHBpbmdzIjoiYUFBQUEsT0FBT0MsT0FBUyxXQUFoQkQsRUFBQUEsVUFBQUUsR0FBZ0IsU0FBQSxTQUFBQyxHQUdkQyxFQUFBRCxFQUFBRSxRQUFBQyxRQUFBLHFCQUFBQyxRQUNBSCxFQUFBLHFCQUFnQkUsWUFBUSw0QkFBNkJFLEtBQUEsMkJBQUFDLFFBQUEsUUFNdkRMLEVBQUFBLFdBQUNGLEdBQVlBLFNBQWIsU0FBQUMsR0FDRSxJQUFNTyxFQUFRTixFQUFFRCxFQUFFUSxlQUNaTixFQUFTSyxFQUFNRSxLQUFLLGdCQUNwQkMsRUFBUUgsRUFBTUosUUFBUSxZQUc1QkksRUFBQUEsS0FBTUksdUJBQVNDLFlBQWYsc0JBRUFGLEVBQUFBLFNBQVcsc0JBRVpBLEVBRURMLEtBQUEsb0JBQUFRLEtBQUEsR0FIRUgsRUFBTUwsS0FBTixrQ0FBQVMsT0FBNkNaLEVBQTdDLE9BQXlEYSxPQUFPLFFBT2hFZCxFQUFBLFFBQUtNLEdBQUFBLFFBQU1TLDBCQUFTLFNBQUFoQixHQUNsQixJQUFBTyxFQUFNVSxFQUFBQSxFQUFBQSxlQUVOVixJQUFBQSxFQUFNVyxTQUFVWCwyQkFBY0gsT0FBOUIsQ0FGQSxJQUFNYSxFQUFxQlYsRUFBTVksU0FLakNaLEVBQU1hLFNBQUFBLFNBQWVDLDBCQUF3QkMsVUFBWUMsRUFBS0osVUFDNURaLEVBQUFXLFVBQWNNLEVBQUVDLFFBQWhCLHNCQUdBLElBQUFM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QyxVQUFXLG9FQUNYRSxXQUFZLENBQUMsQ0FDWFosV0FBWSxLQUNaQyxTQUFVLENBQ1JDLFFBQVEsRUFDUkosT0FBTyxFQUNQUSxjQUFjLE9BSWxCOUYsRUFBRTZCLFVBQVUvQixHQUFHLFNBQVMsU0FBQUMsR0FDVkMsRUFBRUQsRUFBRUUsUUFFUkMsUUFBUSx1QkFBdUJDLFFBQ3ZDSCxFQUFFLHVCQUF1QlcsWUFBWSw4QkFBOEJQLEtBQUssNkJBQTZCQyxRQUFRLFFBS2pITCxFQUFFLDRCQUE0QkYsR0FBRyxTQUFTLFNBQUFDLEdBQ3hDLElBQU1PLEVBQVFOLEVBQUVELEVBQUVRLGVBRWRELEVBQU1ZLFNBQVN1QixTQUFTLHVCQUMxQjFDLEVBQUVrRCxpQkFHSjNDLEVBQU1KLFFBQVEsdUJBQXVCZ0YsWUFBWSw4QkFBOEI5RSxLQUFLLDZCQUE2QnlDLFlBQVkiLCJmaWxlIjoiY29tbW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZSA9PiB7XG4gIC8vIGhpZGUgZHJvcGRvd24gb24gb3V0ZXIgY2xpY2tcbiAgaWYoISQoZS50YXJnZXQpLmNsb3Nlc3QoJy5qcy10YWJzLWRyb3Bkb3duJykubGVuZ3RoKSB7XG4gICAgJCgnLmpzLXRhYnMtZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnanMtdGFicy1kcm9wZG93bi0tYWN0aXZlJykuZmluZCgnLmpzLXRhYnMtZHJvcGRvd24taW5uZXInKS5zbGlkZVVwKDMwMCk7XG4gIH1cbn0pO1xuXG4vLyB0YWJzIGhhbmRsaW5nXG4kKCcuanMtdGFiJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKCdkYXRhLWNvbnRlbnQnKTtcbiAgY29uc3QgJHRhYnMgPSAkdGhpcy5jbG9zZXN0KCcuanMtdGFicycpO1xuXG4gICR0YWJzLmZpbmQoJy50YWJzX19pdGVtLS1hY3RpdmUnKS5yZW1vdmVDbGFzcygndGFic19faXRlbS0tYWN0aXZlJyk7XG4gICR0aGlzLmFkZENsYXNzKCd0YWJzX19pdGVtLS1hY3RpdmUnKTtcblxuICAkdGFicy5maW5kKCcuanMtdGFicy1jb250ZW50JykuaGlkZSgwKTtcbiAgJHRhYnMuZmluZChgLmpzLXRhYnMtY29udGVudFtkYXRhLWNvbnRlbnQ9XCIke3RhcmdldH1cIl1gKS5mYWRlSW4oNTAwKTtcbn0pO1xuXG4vLyB0YWJzIGRyb3Bkb3duXG4kKCdib2R5Jykub24oJ2NsaWNrJywgJy5qcy10YWJzLWRyb3Bkb3duLWl0ZW0nLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gIFxuICBpZiAoISR0aGlzLnNpYmxpbmdzKCcuanMtdGFicy1kcm9wZG93bi1pbm5lcicpLmxlbmd0aCkge1xuICAgIGNvbnN0ICR0YWJzRHJvcGRvd25Jbm5lciA9ICR0aGlzLnBhcmVudCgpO1xuICAgICR0aGlzLnBhcmVudCgpLnNpYmxpbmdzKCcuanMtdGFicy1kcm9wZG93bi1pdGVtJykucHJlcGVuZFRvKCR0aGlzLnBhcmVudCgpKTtcbiAgICAkdGhpcy5wcmVwZW5kVG8oJHRoaXMuY2xvc2VzdCgnLmpzLXRhYnMtZHJvcGRvd24nKSk7XG5cbiAgICAvLyBzb3J0IGVsZW1lbnRzXG4gICAgY29uc3QgJHNvcnRlZEl0ZW1zID0gQXJyYXkuZnJvbSgkdGhpcy5uZXh0KCkuY2hpbGRyZW4oKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgYVRleHQgPSBhLmlubmVyVGV4dDtcbiAgICAgIGNvbnN0IGJUZXh0ID0gYi5pbm5lclRleHQ7XG4gIFxuICAgICAgaWYgKGFUZXh0IDwgYlRleHQpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHRoaXMubmV4dCgpLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG4gICAgJHRhYnNEcm9wZG93bklubmVyLmFwcGVuZCgkc29ydGVkSXRlbXMpO1xuICB9XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmpzLXRhYnMtZHJvcGRvd24nKS50b2dnbGVDbGFzcygnanMtdGFicy1kcm9wZG93bi0tYWN0aXZlJykuZmluZCgnLmpzLXRhYnMtZHJvcGRvd24taW5uZXInKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICAvLyBoaWRlIGRyb3Bkb3duIG9uIG91dGVyIGNsaWNrXG4gIGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcuanMtcG9wdXAtZHJvcGRvd24nKS5sZW5ndGgpIHtcbiAgICAkKCcuanMtcG9wdXAtZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnanMtcG9wdXAtZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy1wb3B1cC1kcm9wZG93bi1pbm5lcicpLnNsaWRlVXAoMzAwKTtcbiAgfVxufSk7XG5cbi8vIHBvcHVwIGhhbmRsaW5nXG5sZXQgdG9wT2Zmc2V0ID0gMDtcblxuY29uc3QgaGlkZU92ZXJmbG93ID0gKCkgPT4ge1xuICB0b3BPZmZzZXQgPSB3aW5kb3cuc2Nyb2xsWTtcblxuICAkKCdib2R5JykuY3NzKHtcbiAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICBtYXJnaW5Ub3A6IGAkey10b3BPZmZzZXR9cHhgXG4gIH0pO1xufTtcblxuY29uc3Qgc2hvd092ZXJmbG93ID0gKCkgPT4ge1xuICAkKCdib2R5JykuY3NzKHtcbiAgICBwb3NpdGlvbjogJ3N0YXRpYycsXG4gICAgbWFyZ2luVG9wOiAnMCdcbiAgfSk7XG5cbiAgd2luZG93LnNjcm9sbFRvKDAsIHRvcE9mZnNldCk7XG59O1xuXG5jb25zdCBjbG9zZVBvcHVwID0gKGUsICR0aGlzKSA9PiB7XG4gIGlmKCEkKGUudGFyZ2V0KS5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpLmxlbmd0aCB8fCAhJHRoaXMuaGFzQ2xhc3MoJ2pzLXBvcHVwJykpIHtcbiAgICBzaG93T3ZlcmZsb3coKTtcbiAgXG4gICAgJHRoaXMuY2xvc2VzdCgnLmpzLXBvcHVwJykuaGlkZSgwKTtcblx0fVxufTtcblxuY29uc3Qgb3BlblBvcHVwID0gJHBvcHVwID0+IHtcbiAgaGlkZU92ZXJmbG93KCk7XG4gIFxuICAkcG9wdXAuZmFkZUluKDMwMCk7XG59O1xuXG4kKCcuanMtb3Blbi1wb3B1cCcpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1wb3B1cCcpO1xuICBjb25zdCAkcG9wdXAgPSAkKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICBvcGVuUG9wdXAoJHBvcHVwKTtcbn0pO1xuXG4kKCcuanMtY2xvc2UtcG9wdXAnKS5vbignY2xpY2snLCBlID0+IHtcbiAgY2xvc2VQb3B1cChlLCAkKGUuY3VycmVudFRhcmdldCkpO1xufSk7XG5cbi8vIHBvcHVwIGRyb3Bkb3duXG4kKCcuanMtcG9wdXAtZHJvcGRvd24taXRlbScpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICBpZiAoISR0aGlzLnNpYmxpbmdzKCcuanMtcG9wdXAtZHJvcGRvd24taW5uZXInKS5sZW5ndGgpIHtcbiAgICAkdGhpcy5wYXJlbnQoKS5zaWJsaW5ncygnLmpzLXBvcHVwLWRyb3Bkb3duLWl0ZW0nKS5wcmVwZW5kVG8oJHRoaXMucGFyZW50KCkpO1xuICAgICR0aGlzLnByZXBlbmRUbygkdGhpcy5jbG9zZXN0KCcuanMtcG9wdXAtZHJvcGRvd24nKSk7XG4gIH1cblxuICAkdGhpcy5jbG9zZXN0KCcuanMtcG9wdXAtZHJvcGRvd24nKS50b2dnbGVDbGFzcygnanMtcG9wdXAtZHJvcGRvd24tLWFjdGl2ZScpLmZpbmQoJy5qcy1wb3B1cC1kcm9wZG93bi1pbm5lcicpLnNsaWRlVG9nZ2xlKDMwMCk7XG59KTtcblxuLy8gcG9wdXAgZm9ybXMgaGFuZGxpbmdcbiQoJy5qcy1mb3JtLXdpdGhkcmF3Jykub24oJ3N1Ym1pdCcsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCAkYWRkcmVzcyA9ICR0aGlzLmZpbmQoJ2lucHV0W25hbWU9XCJldGhXaXRoZHJhd2FsV2FsbGV0QWRkcmVzc1wiXScpO1xuICBjb25zdCAkYW1vdW50ID0gJHRoaXMuZmluZCgnaW5wdXRbbmFtZT1cImV0aFN1bVRvV2l0aGRyYXdcIl0nKTtcbiAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuXG4gIGlmICgkYWRkcmVzcy52YWwoKS5sZW5ndGggIT09IDM0KSB7XG4gICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICRhZGRyZXNzLmNsb3Nlc3QoJy5pbnB1dCcpLmFkZENsYXNzKCdpbnB1dC0tZXJyb3InKTtcbiAgfVxuXG4gIGlmICgkYW1vdW50LnZhbCgpIDwgJGFtb3VudC5hdHRyKCdkYXRhLW1pbicpKSB7XG4gICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICRhbW91bnQuY2xvc2VzdCgnLmlucHV0JykuYWRkQ2xhc3MoJ2lucHV0LS1lcnJvcicpLmZpbmQoJy5pbnB1dF9fZXJyb3InKS50ZXh0KGDQnNC40L3QuNC80YPQvCAkeyRhbW91bnQuYXR0cignZGF0YS1taW4nKX1gKTtcbiAgfSBlbHNlIGlmICgkYW1vdW50LnZhbCgpID4gJGFtb3VudC5hdHRyKCdkYXRhLW1heCcpKSB7XG4gICAgaXNWYWxpZCA9IGZhbHNlO1xuICAgICRhbW91bnQuY2xvc2VzdCgnLmlucHV0JykuYWRkQ2xhc3MoJ2lucHV0LS1lcnJvcicpLmZpbmQoJy5pbnB1dF9fZXJyb3InKS50ZXh0KCfQndC10LTQvtGB0YLQsNGC0L7Rh9C90L4g0YHRgNC10LTRgdGC0LInKTtcbiAgfVxuXG4gIGlmIChpc1ZhbGlkKSB7XG4gICAgLy8gc2VuZCBmb3JtXG4gIH1cbn0pO1xuXG4kKCcuanMtZm9ybS10cmFuc2ZlcicpLm9uKCdzdWJtaXQnLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgJG5hbWUgPSAkdGhpcy5maW5kKCdpbnB1dFtuYW1lPVwicmVjaXBpZW50TmFtZVwiXScpO1xuICBjb25zdCAkYW1vdW50ID0gJHRoaXMuZmluZCgnaW5wdXRbbmFtZT1cInRyYW5zZmVyQW1vdW50XCJdJyk7XG4gIGxldCBpc1ZhbGlkID0gdHJ1ZTtcblxuICBpZiAoJG5hbWUudmFsKCkubGVuZ3RoICE9PSAzNCkge1xuICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAkbmFtZS5jbG9zZXN0KCcuaW5wdXQnKS5hZGRDbGFzcygnaW5wdXQtLWVycm9yJyk7XG4gIH1cblxuICBpZiAoJGFtb3VudC52YWwoKSA+ICRhbW91bnQuYXR0cignZGF0YS1tYXgnKSkge1xuICAgIGlzVmFsaWQgPSBmYWxzZTtcbiAgICAkYW1vdW50LmNsb3Nlc3QoJy5pbnB1dCcpLmFkZENsYXNzKCdpbnB1dC0tZXJyb3InKS5maW5kKCcuaW5wdXRfX2Vycm9yJykudGV4dCgn0J3QtdC00L7RgdGC0LDRgtC+0YfQvdC+INGB0YDQtdC00YHRgtCyJyk7XG4gIH1cblxuICBpZiAoaXNWYWxpZCkge1xuICAgIC8vIHNlbmQgZm9ybVxuICB9XG59KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLnRhcmdldCk7XG5cbiAgLy8gaGlkZSBkcm9wZG93biBvbiBvdXRlciBjbGlja1xuICBpZighJHRoaXMuaGFzQ2xhc3MoJ2pzLXRlbC1kcm9wZG93bicpICYmICEkdGhpcy5oYXNDbGFzcygnaW5wdXRfX2ZpZWxkJykpIHtcbiAgICAkKCcuanMtdGVsLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2pzLXRlbC1kcm9wZG93bi0tYWN0aXZlJykuZmluZCgnLmpzLXRlbC1kcm9wZG93bi1pbm5lcicpLnNsaWRlVXAoMzAwKTtcbiAgfVxufSk7XG5cbi8vIGNvcHkgdG8gY2xpcGJvYXJkXG4kKCcuanMtaW5wdXQtY29weScpLm9uKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGlucHV0ID0gZS5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignaW5wdXQnKTtcbiAgY29uc3QgdHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICBcbiAgaW5wdXQuc2VsZWN0KCk7XG4gIGlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIDk5OTk5KTtcbiAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgdHlwZSk7XG59KTtcblxuLy8gcmVtb3ZlIGVycm9yIHRleHRcbiQoJy5pbnB1dCcpLm9uKCdpbnB1dCcsIGUgPT4ge1xuICAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLmlucHV0JykucmVtb3ZlQ2xhc3MoJ2lucHV0LS1lcnJvcicpO1xufSk7XG5cbi8vIHNldCBtYXggdG8gc3VtIGlucHV0XG4kKCcuanMtaW5wdXQtbWF4Jykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gICR0aGlzLnNpYmxpbmdzKCcuaW5wdXRfX2ZpZWxkJykudmFsKCR0aGlzLnNpYmxpbmdzKCcuaW5wdXRfX2ZpZWxkJykuYXR0cignZGF0YS1tYXgnKSk7XG4gICR0aGlzLmNsb3Nlc3QoJy5pbnB1dCcpLnJlbW92ZUNsYXNzKCdpbnB1dC0tZXJyb3InKTtcbn0pO1xuXG4vLyB0ZWwgZHJvcGRvd25cbiQoJy5qcy10ZWwtZHJvcGRvd24nKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAkKGUuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2pzLXRlbC1kcm9wZG93bi0tYWN0aXZlJykuZmluZCgnLmpzLXRlbC1kcm9wZG93bi1pbm5lcicpLnNsaWRlVG9nZ2xlKDMwMCk7XG59KTtcblxuJCgnLmpzLXRlbC1kcm9wZG93bi1pdGVtJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCBpY29uID0gJHRoaXMuYXR0cignZGF0YS1pY29uJyk7XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmpzLXRlbC1kcm9wZG93bicpLmF0dHIoJ2RhdGEtaWNvbicsIGljb24pO1xuICAkdGhpcy5jbG9zZXN0KCcuaW5wdXQnKS5maW5kKCdpbnB1dCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJHRoaXMuYXR0cignZGF0YS1tYXNrJykucmVwbGFjZUFsbCgnOScsICdfJykpLmlucHV0bWFzaygkdGhpcy5hdHRyKCdkYXRhLW1hc2snKSk7XG59KTtcblxuLy8gbWFza2luZ1xuJCgnaW5wdXRbdHlwZT1cInRlbFwiXScpLmVhY2goKGksIGVsKSA9PiB7XG4gICQoZWwpLmlucHV0bWFzaygkKGVsKS5hdHRyKCdkYXRhLW1hc2snKSk7XG59KTtcblxuLy8gdG9nZ2xlIHZpc2liaWxpdHlcbiQoJy5qcy1pbnB1dC10b2dnbGUnKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCAkaW5wdXRGaWVsZCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnaW5wdXQnKTtcblxuICAkaW5wdXRGaWVsZC5hdHRyKCd0eXBlJywgJGlucHV0RmllbGQuYXR0cigndHlwZScpID09PSAncGFzc3dvcmQnID8gJ3RleHQnIDogJ3Bhc3N3b3JkJyk7XG59KTtcbiAgJCgnLmNvZGVfX2lucHV0Jykub24oJ2tleXVwJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCBpbnB1dFZhbCA9ICR0aGlzLnZhbCgpO1xuICBjb25zdCBrZXkgPSBlLmtleUNvZGUgfHwgZS5jaGFyQ29kZTtcbiAgbGV0IGNvZGVJc05vdEVudGVyZWQgPSBmYWxzZTtcblxuICAkdGhpcy52YWwoaW5wdXRWYWwucmVwbGFjZSgvW14wLTldL2csICcnKSk7XG5cbiAgaWYgKCEvW14wLTldL2cudGVzdChpbnB1dFZhbCkgJiYga2V5ICE9IDggJiYga2V5ICE9IDQ2KSB7XG4gICAgJHRoaXMubmV4dCgpLmZvY3VzKCk7XG4gIH0gZWxzZSBpZiAoKGtleSA9PSA4IHx8IGtleSA9PSA0NikgJiYgaW5wdXRWYWwgPT09ICcnKSB7XG4gICAgJHRoaXMucHJldigpLmZvY3VzKCk7XG4gIH1cblxuICAkdGhpcy5wYXJlbnQoKS5maW5kKCdpbnB1dCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgaWYgKGVsLnZhbHVlID09PSAnJykge1xuICAgICAgY29kZUlzTm90RW50ZXJlZCA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICBpZiAoIWNvZGVJc05vdEVudGVyZWQpIHtcbiAgICAkdGhpcy5wYXJlbnQoKS5hZGRDbGFzcygnY29kZS0tZW50ZXJlZCcpO1xuICAgICR0aGlzLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5qcy1jb2RlLXRpdGxlJykuaGlkZSgpO1xuICAgICR0aGlzLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoJy5qcy1jb2RlLXJlc3VsdCcpLnNob3coKTtcbiAgICAkdGhpcy5ibHVyKCk7XG4gIH1cbn0pO1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS50YXJnZXQpO1xuXG4gIC8vIGhpZGUgbWVudSBvbiBvdXRlciBjbGlja1xuICBpZighJHRoaXMuY2xvc2VzdCgnLmpzLW1lbnUnKS5sZW5ndGggJiYgISR0aGlzLmhhc0NsYXNzKCdqcy1idXJnZXInKSAmJiAhJHRoaXMuY2xvc2VzdCgnLmpzLWJ1cmdlcicpLmxlbmd0aCkge1xuICAgICQoJy5qcy1tZW51JykucmVtb3ZlQ2xhc3MoJ2hlYWRlcl9fbWVudS0tYWN0aXZlJyk7XG4gIH1cbiAgXG4gIC8vIGhpZGUgZHJvcGRvd24gb24gb3V0ZXIgY2xpY2tcbiAgaWYoISR0aGlzLmNsb3Nlc3QoJy5qcy1oZWFkZXItZHJvcGRvd24nKS5sZW5ndGgpIHtcbiAgICAkKCcuanMtaGVhZGVyLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2pzLWhlYWRlci1kcm9wZG93bi0tYWN0aXZlJykuZmluZCgnLmpzLWhlYWRlci1kcm9wZG93bi1pbm5lcicpLnNsaWRlVXAoMzAwKTtcbiAgfVxuICBcbiAgLy8gaGlkZSBjb250ZXh0IG1lbnUgb24gb3V0ZXIgY2xpY2tcbiAgaWYoISR0aGlzLmNsb3Nlc3QoJy5oZWFkZXJfX2NvbnRleHQnKS5sZW5ndGggfHwgJHRoaXMuaGFzQ2xhc3MoJ2pzLW9wZW4tcG9wdXAnKSkge1xuICAgICQoJy5qcy1oZWFkZXItY29udGV4dC1tZW51JykuZmFkZU91dCgzMDApO1xuICB9XG59KTtcblxuLy8gaGVhZGVyIG1lbnVcbiQoJy5qcy1idXJnZXInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICQoJy5qcy1tZW51JykuYWRkQ2xhc3MoJ2hlYWRlcl9fbWVudS0tYWN0aXZlJyk7XG5cbiAgaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPCAxMTk5KSB7XG4gICAgaGlkZU92ZXJmbG93KCk7XG4gIH1cbn0pO1xuXG4kKCcuanMtbWVudS1jbG9zZScpLm9uKCdjbGljaycsICgpID0+IHtcbiAgJCgnLmpzLW1lbnUnKS5yZW1vdmVDbGFzcygnaGVhZGVyX19tZW51LS1hY3RpdmUnKTtcblxuICBpZiAoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSA8IDExOTkpIHtcbiAgICBzaG93T3ZlcmZsb3coKTtcbiAgfVxufSk7XG5cbi8vIGhlYWRlciBkcm9wZG93blxuaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW5jeVNob3cnKSkge1xuICBjb25zdCAkY3VycmVudEN1cnJlbmN5ID0gJChgLmpzLWhlYWRlci1kcm9wZG93bi1pdGVtW2RhdGEtY3VycmVuY3k9XCIke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW5jeVNob3cnKX1cIl1gKTtcblxuICAkY3VycmVudEN1cnJlbmN5LnBhcmVudCgpLnNpYmxpbmdzKCcuanMtaGVhZGVyLWRyb3Bkb3duLWl0ZW0nKS5wcmVwZW5kVG8oJGN1cnJlbnRDdXJyZW5jeS5wYXJlbnQoKSk7XG4gICRjdXJyZW50Q3VycmVuY3kucHJlcGVuZFRvKCRjdXJyZW50Q3VycmVuY3kuY2xvc2VzdCgnLmpzLWhlYWRlci1kcm9wZG93bicpKTtcbn1cblxuJCgnLmpzLWhlYWRlci1kcm9wZG93bi1pdGVtJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gIGlmICghJHRoaXMuc2libGluZ3MoJy5qcy1oZWFkZXItZHJvcGRvd24taW5uZXInKS5sZW5ndGgpIHtcbiAgICAkdGhpcy5wYXJlbnQoKS5zaWJsaW5ncygnLmpzLWhlYWRlci1kcm9wZG93bi1pdGVtJykucHJlcGVuZFRvKCR0aGlzLnBhcmVudCgpKTtcbiAgICAkdGhpcy5wcmVwZW5kVG8oJHRoaXMuY2xvc2VzdCgnLmpzLWhlYWRlci1kcm9wZG93bicpKTtcbiAgfVxuXG4gIGlmICgkdGhpcy5hdHRyKCdkYXRhLWN1cnJlbmN5JykpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVuY3lTaG93JywgJHRoaXMuYXR0cignZGF0YS1jdXJyZW5jeScpKTtcbiAgfVxuXG4gICR0aGlzLmNsb3Nlc3QoJy5qcy1oZWFkZXItZHJvcGRvd24nKS50b2dnbGVDbGFzcygnanMtaGVhZGVyLWRyb3Bkb3duLS1hY3RpdmUnKS5maW5kKCcuanMtaGVhZGVyLWRyb3Bkb3duLWlubmVyJykuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuXG4vLyBjb250ZXh0IG1lbnVcbiQoJy5qcy1oZWFkZXItY29udGV4dCcpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICAkKCcuanMtaGVhZGVyLWNvbnRleHQtbWVudScpLm5vdCgkdGhpcy5zaWJsaW5ncygpKS5mYWRlT3V0KDMwMCk7XG4gICR0aGlzLnNpYmxpbmdzKCcuanMtaGVhZGVyLWNvbnRleHQtbWVudScpLmZhZGVUb2dnbGUoMzAwKTtcbn0pO1xuXG4vLyBjcnlwdG8gc3dpdGNoXG5jb25zdCBzZXRDcnlwdG9DYXNoVmlldyA9IHR5cGUgPT4ge1xuICBpZiAodHlwZSA9PT0gJ2Nhc2gnKSB7XG4gICAgJCgnLmhlYWRlcl9fY3J5cHRvIC5qcy1oZWFkZXItZHJvcGRvd24taXRlbScpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAkKGVsKS5odG1sKGA8c3Bhbj4kPC9zcGFuPiR7JChlbCkuYXR0cignZGF0YS1jYXNoJyl9YCk7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtaGVhZGVyLXN3aXRjaCcpLmF0dHIoJ2RhdGEtdHlwZScsICdjYXNoJyk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NyeXB0bycpIHtcbiAgICAkKCcuaGVhZGVyX19jcnlwdG8gLmpzLWhlYWRlci1kcm9wZG93bi1pdGVtJykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICQoZWwpLmh0bWwoJChlbCkuYXR0cignZGF0YS1jcnlwdG8nKSk7XG4gICAgfSk7XG5cbiAgICAkKCcuanMtaGVhZGVyLXN3aXRjaCcpLmF0dHIoJ2RhdGEtdHlwZScsICdjcnlwdG8nKTtcbiAgfVxufTtcblxuaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjcnlwdG9DYXNoVmlldycpID09PSAnY2FzaCcpIHtcbiAgc2V0Q3J5cHRvQ2FzaFZpZXcoJ2Nhc2gnKTtcbn0gZWxzZSB7XG4gIHNldENyeXB0b0Nhc2hWaWV3KCdjcnlwdG8nKTtcbn1cblxuJCgnLmpzLWhlYWRlci1zd2l0Y2gnKS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cbiAgaWYgKCR0aGlzLmF0dHIoJ2RhdGEtdHlwZScpID09PSAnY3J5cHRvJykge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjcnlwdG9DYXNoVmlldycsICdjYXNoJyk7XG5cbiAgICBzZXRDcnlwdG9DYXNoVmlldygnY2FzaCcpO1xuICB9IGVsc2Uge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjcnlwdG9DYXNoVmlldycsICdjcnlwdG8nKTtcblxuICAgIHNldENyeXB0b0Nhc2hWaWV3KCdjcnlwdG8nKTtcbiAgfVxufSk7XG4gICQoJy5qcy1zbGlkZXInKS5zbGljayh7XG4gIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gIGNlbnRlck1vZGU6IHRydWUsXG4gIHN3aXBlOiBmYWxzZSxcbiAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cInNsaWRlcl9fY2Fyb3VzZWwtYXJyb3cgc2xpZGVyX19jYXJvdXNlbC1hcnJvdy0tcHJldlwiPjwvZGl2PicsXG4gIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJzbGlkZXJfX2Nhcm91c2VsLWFycm93IHNsaWRlcl9fY2Fyb3VzZWwtYXJyb3ctLW5leHRcIj48L2Rpdj4nLFxuICByZXNwb25zaXZlOiBbe1xuICAgIGJyZWFrcG9pbnQ6IDExOTksXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIGFycm93czogZmFsc2UsXG4gICAgICBzd2lwZTogdHJ1ZSxcbiAgICAgIHN3aXBlVG9TbGlkZTogdHJ1ZVxuICAgIH1cbiAgfV1cbn0pO1xuICAkKCcuanMtZ2FtZXMtc2xpZGVyJykuc2xpY2soe1xuICBpbmZpbml0ZTogdHJ1ZSxcbiAgc3dpcGU6IGZhbHNlLFxuICBzbGlkZXNUb1Nob3c6IDYsXG4gIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gIHByZXZBcnJvdzogJzxkaXYgY2xhc3M9XCJnYW1lc19fc2xpZGVyLWFycm93IGdhbWVzX19zbGlkZXItYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwiZ2FtZXNfX3NsaWRlci1hcnJvdyBnYW1lc19fc2xpZGVyLWFycm93LS1uZXh0XCI+PC9kaXY+JyxcbiAgcmVzcG9uc2l2ZTogW3tcbiAgICBicmVha3BvaW50OiAxMTk5LFxuICAgIHNldHRpbmdzOiB7XG4gICAgICBzd2lwZTogdHJ1ZSxcbiAgICAgIHN3aXBlVG9TbGlkZTogdHJ1ZSxcbiAgICAgIHNsaWRlc1RvU2hvdzogM1xuICAgIH1cbiAgfV1cbn0pO1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBlID0+IHtcbiAgLy8gaGlkZSBkcm9wZG93biBvbiBvdXRlciBjbGlja1xuICBpZighJChlLnRhcmdldCkuY2xvc2VzdCgnLmpzLWdyb3VwLWRyb3Bkb3duJykubGVuZ3RoKSB7XG4gICAgJCgnLmpzLWdyb3VwLWRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2pzLWdyb3VwLWRyb3Bkb3duLS1hY3RpdmUnKS5maW5kKCcuanMtZ3JvdXAtZHJvcGRvd24taW5uZXInKS5zbGlkZVVwKDMwMCk7XG4gIH1cbn0pO1xuXG4vLyBncm91cCBkcm9wZG93blxuJCgnYm9keScpLm9uKCdjbGljaycsICcuanMtZ3JvdXAtZHJvcGRvd24taXRlbScsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgXG4gIGlmICghJHRoaXMuc2libGluZ3MoJy5qcy1ncm91cC1kcm9wZG93bi1pbm5lcicpLmxlbmd0aCkge1xuICAgIGNvbnN0ICRncm91cERyb3Bkb3duSW5uZXIgPSAkdGhpcy5wYXJlbnQoKTtcbiAgICAkdGhpcy5wYXJlbnQoKS5zaWJsaW5ncygnLmpzLWdyb3VwLWRyb3Bkb3duLWl0ZW0nKS5wcmVwZW5kVG8oJHRoaXMucGFyZW50KCkpO1xuICAgICR0aGlzLnByZXBlbmRUbygkdGhpcy5jbG9zZXN0KCcuanMtZ3JvdXAtZHJvcGRvd24nKSk7XG5cbiAgICAvLyBzb3J0IGVsZW1lbnRzXG4gICAgY29uc3QgJHNvcnRlZEl0ZW1zID0gQXJyYXkuZnJvbSgkdGhpcy5uZXh0KCkuY2hpbGRyZW4oKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgYVRleHQgPSBhLmlubmVyVGV4dDtcbiAgICAgIGNvbnN0IGJUZXh0ID0gYi5pbm5lclRleHQ7XG4gIFxuICAgICAgaWYgKGFUZXh0IDwgYlRleHQpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHRoaXMubmV4dCgpLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG4gICAgJGdyb3VwRHJvcGRvd25Jbm5lci5hcHBlbmQoJHNvcnRlZEl0ZW1zKTtcbiAgfVxuXG4gICR0aGlzLmNsb3Nlc3QoJy5qcy1ncm91cC1kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdqcy1ncm91cC1kcm9wZG93bi0tYWN0aXZlJykuZmluZCgnLmpzLWdyb3VwLWRyb3Bkb3duLWlubmVyJykuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuICAkKCcubGV2ZWxzX19pdGVtLWhlYWQnKS5vbignY2xpY2snLCBlID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cbiAgJCgnLmxldmVsc19faXRlbS1kZXNjJykuc2xpZGVVcCgzMDApO1xuXG4gIGlmICgkdGhpcy5oYXNDbGFzcygnbGV2ZWxzX19pdGVtLWhlYWQtLWFjdGl2ZScpKSB7XG4gICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2xldmVsc19faXRlbS1oZWFkLS1hY3RpdmUnKTtcbiAgfSBlbHNlIHtcbiAgICAkKCcubGV2ZWxzX19pdGVtLWhlYWQtLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdsZXZlbHNfX2l0ZW0taGVhZC0tYWN0aXZlJyk7XG4gICAgJHRoaXMuYWRkQ2xhc3MoJ2xldmVsc19faXRlbS1oZWFkLS1hY3RpdmUnKTtcbiAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCcubGV2ZWxzX19pdGVtLWRlc2MnKS5zbGlkZURvd24oMzAwKTtcbiAgfVxufSk7XG4gICQoJy5qcy12aXAtc2xpZGVyJykuc2xpY2soe1xuICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICB2YXJpYWJsZUhlaWdodDogdHJ1ZSxcbiAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgc3dpcGU6IGZhbHNlLFxuICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwidmlwX19mZWVkYmFjay1hcnJvdyB2aXBfX2ZlZWRiYWNrLWFycm93LS1wcmV2XCI+PC9kaXY+JyxcbiAgbmV4dEFycm93OiAnPGRpdiBjbGFzcz1cInZpcF9fZmVlZGJhY2stYXJyb3cgdmlwX19mZWVkYmFjay1hcnJvdy0tbmV4dFwiPjwvZGl2PicsXG4gIHJlc3BvbnNpdmU6IFt7XG4gICAgYnJlYWtwb2ludDogMTE5OSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIHN3aXBlOiB0cnVlLFxuICAgICAgc3dpcGVUb1NsaWRlOiB0cnVlXG4gICAgfVxuICB9XVxufSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS50YXJnZXQpO1xuXG4gIGlmKCEkdGhpcy5jbG9zZXN0KCcuanMtc2V0dGluZ3MtZmlsdGVyJykubGVuZ3RoKSB7XG4gICAgJCgnLmpzLXNldHRpbmdzLWZpbHRlcicpLnJlbW92ZUNsYXNzKCdqcy1zZXR0aW5ncy1maWx0ZXItLWFjdGl2ZScpLmZpbmQoJy5qcy1zZXR0aW5ncy1maWx0ZXItaW5uZXInKS5zbGlkZVVwKDMwMCk7XG4gIH1cbn0pO1xuXG4vLyBzZXR0aW5ncyBmaWx0ZXIgZHJvcGRvd25cbiQoJy5qcy1zZXR0aW5ncy1maWx0ZXItaXRlbScpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICBpZiAoJHRoaXMucGFyZW50KCkuaGFzQ2xhc3MoJ2pzLXNldHRpbmdzLWZpbHRlcicpKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgJHRoaXMuY2xvc2VzdCgnLmpzLXNldHRpbmdzLWZpbHRlcicpLnRvZ2dsZUNsYXNzKCdqcy1zZXR0aW5ncy1maWx0ZXItLWFjdGl2ZScpLmZpbmQoJy5qcy1zZXR0aW5ncy1maWx0ZXItaW5uZXInKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG5cblxufSJdfQ==
